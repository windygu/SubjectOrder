!function(e,t){function n(){function n(e,t,n){for(var o=0;o<e.length;o++)document.addEventListener(e[o],t,n)}function o(e,t){for(var n,o,r=t[0].toUpperCase()+t.slice(1),i=0;i<VENDOR_PREFIXES.length;){if(n=VENDOR_PREFIXES[i],o=n?n+r:t,o in e)return e[o];i++}return void 0}function r(e){if(!(this instanceof r))throw new TypeError("Constructor Promise requires `new`");if(!l(e))throw new TypeError("Must pass resolver function");this._state=s,this._value=[],this._isChainEnd=!0,m(this,d(this,i),d(this,a),{then:e})}function i(e,t,n,o){return t?(o||(o=new u(this.constructor)),Z(p(o,t,e)),o.promise):(f(o,i,e),this)}function a(e,t,n,o){return n?(o||(o=new u(this.constructor)),Z(p(o,n,e)),o.promise):(f(o,a,e),this)}function s(e,t,n,o){if(!o){if(!t&&!n)return this;o=new u(this.constructor)}return e.push({deferred:o,onFulfilled:t||o.resolve,onRejected:n||o.reject}),o.promise}function u(e){var t=this;return this.promise=new e(function(e,n){t.resolve=e,t.reject=n}),t}function c(e,t,n,o){var r=e._value;e._state=t,e._value=n,o&&t===s&&o._state(n,void 0,void 0,{promise:e,resolve:void 0,reject:void 0});for(var i=0;i<r.length;i++){var u=r[i];e._state(n,u.onFulfilled,u.onRejected,u.deferred)}r.length=0,t===a&&e._isChainEnd&&setTimeout(function(){e._isChainEnd&&K(n,e)},0)}function d(e,t){return function(n){c(e,t,n)}}function f(e,t,n){if(e){var o=e.promise;o._state=t,o._value=n}}function g(){}function l(e){return"function"==typeof e}function v(e){return e===Object(e)}function _(e,t){for(var n=0;n<e.length;n++)t(e[n],n)}function p(e,t,n){var o=e.promise,r=e.resolve,i=e.reject;return function(){try{var e=t(n);m(o,r,i,e,e)}catch(e){i(e)}}}function m(e,t,n,o,r){var i,a,s=n;try{if(o===e)throw new TypeError("Cannot fulfill promise with itself");var u=v(o);u&&o instanceof e.constructor?c(e,o._state,o._value,o):u&&(i=o.then)&&l(i)?(a=function(o){a=s=g,m(e,t,n,o,o)},s=function(e){a=s=g,n(e)},i.call(r,function(e){a(e)},function(e){s(e)})):t(o)}catch(e){s(e)}}var h="1.0.6",S=e._page_type?e._page_type:0,y=e._tt_config,w={FAIL:0,UNUSE:1,SUCCESS:2},E="",C="",I=20,b=null,T="",U="",x="",A="",F="",P="",N="",M="",R="",D="",q="",O=w.UNUSE,L=w.UNUSE,j=w.UNUSE,k=w.SUCCESS,J=w.UNUSE,B={combineData:function(){for(var e={},t=Array.prototype.slice.call(arguments),n=0;n<t.length;n++)for(var o in t[n])e[o]&&t[n][o]&&(e[o]=t[n][o]),e[o]||void 0===t[n][o]||null===t[n][o]||(e[o]=t[n][o]);return e},getOS:function(){var e=navigator.userAgent,t={android:e.match(/(Android)\s+([\d.]+)/),ipad:e.match(/(iPad).*OS\s([\d_]+)/),iphone:e.match(/(iPhone\sOS)\s([\d_]+)/)},n="";return t.android?n="android":(t.ipad||t.iphone)&&(n="ios"),n},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isExternal:function(){var e=!B.isToutiao()&&/(UCBrowser|baiduboxapp|baidubrowser|MQQBrowser|QQ|MicroMessenger|Weibo|Opera|Firefox|MSIE|360SE|MetaSr|TheWorld|Firefox|LBBROWSER|Chrome|Safari)(\s|\/|_)(\S)/i.test(navigator.userAgent);return e},isToutiao:function(){var e="http://nativeapp.toutiao.com"==document.referrer||/(News|NewsSocial|Explore|NewsArticle|NewsInHouse|joke_essay|Joke|Video|VideoInHouse|VideoArticle|live_stream)(\s|\/|_)(\S)/i.test(navigator.userAgent);return e},isLive:function(){return/(live_stream)(\s|\/|_)(\S)/i.test(navigator.userAgent)},isJoke:function(){return/(joke_essay|Joke)(\s|\/|_)(\S)/i.test(navigator.userAgent)},getDefer:function(){var e={},t=new r(function(t,n){e.resolve=t,e.reject=n});return e.promise=t,e},getLocationParam:function(e){var t={QueryString:function(e){var t=window.location.href,n=new RegExp("[&?]{1}"+e+"=([^&?|^#?]*)","ig");return t.match(n)?decodeURI(t.match(n)[0].substr(e.length+2)):(t=document.referrer,t.match(n)?decodeURI(t.match(n)[0].substr(e.length+2)):"")}};return t.QueryString(e)},queryToJson:function(e){for(var t,n,o,r,i=e.substr(e.lastIndexOf("?")+1),a=i.split("&"),s=a.length,u={},c=0;s>c;c++)a[c]&&(r=a[c].split("="),t=r[0],n=r[1],o=u[t],"undefined"==typeof o?u[t]=n:this.isArray(o)?o.push(n):u[t]=[o,n]);return u},jsonToQuery:function(e){var t=[];e=e||{};var n=/^(?:string|boolean|number)/i;for(var o in e)e.hasOwnProperty(o)&&n.test(typeof e[o])&&t.push(o+"="+e[o]);return t.join("&")},extend:function(e,t){for(var n in t)e[n]=t[n]},getAdId:function(){var e=B.getLocationParam("_tt_ad_id")||B.getLocationParam("ad_id")||B.getLocationParam("aid");return e},getReqId:function(){return B.getLocationParam("req_id")||""},getCid:function(){return B.getLocationParam("cid")||""},getWebUrlInfo:function(){var e,t=window.decodeURIComponent(B.getLocationParam("_toutiao_params")||B.getLocationParam("_toutiao_recommend")||"");try{e=JSON.parse(t)}catch(n){}return e},encodeParams:function(e){var t=[];e=e||{};var n=/^(?:string|boolean|number)/i;for(var o in e)if(e.hasOwnProperty(o)&&n.test(typeof e[o])){var r=decodeURIComponent(e[o]);t.push(encodeURIComponent(o)+"="+encodeURIComponent(r))}return t.join("&")},jsonp:function(e){if(e=e||{},!e.url||!e.callback)throw new Error("参数不合法");var t=("jsonp_"+Math.random()).replace(".",""),n=document.getElementsByTagName("head")[0];e.data[e.callback]=t;var o=this.encodeParams(e.data),r=document.createElement("script");n.appendChild(r),window[t]=function(o){n.removeChild(r),clearTimeout(r.timer),window[t]=null,e.success&&e.success(o)},r.src=e.url+"?"+o,e.time&&(r.timer=setTimeout(function(){window[t]=null,n.removeChild(r),e.fail&&e.fail({message:"超时"})},e.time))},syncGet:function(e){var t=new XMLHttpRequest;t.open("GET",e.url,!1),t.withCredentials=!0,t.send(null)},imageGet:function(e){var t=new Image;t.src=window.location.protocol+e.url},addLoadEvent:function(e){var t=window.onload;window.onload="function"!=typeof window.onload?e:function(){t(),e()}},getSiteId:function(){var e=window.location.pathname,t=/\d+/g,n=e.match(t)||[];return n[0]||""},setToSessionStorage:function(e,t){var n=window.sessionStorage;n.setItem(e,t)},getFromSessionStorage:function(e){var t=window.sessionStorage;return t.getItem(e)},_parseUmengData:function(t){var n={value:M||B.getCid()},o=n.extra={sdk_version:h,site_id:q,options:{},log_extra:b||B.getFromSessionStorage("umeng_log_extra")||"{}",convert_id:R||0};for(var r in t)if("target"===r)B.extend(o,this._getPosition(t[r]));else if("page_url"===r)o[r]=decodeURIComponent(t[r])||decodeURIComponent(e.location.href);else if("page_type"===r)o[r]=t[r]||S;else if("track_data"===r){var i=JSON.parse(e.decodeURIComponent(t[r])),a=["page_url","page_type","event_type","event_value","xpath","os"];a.forEach(function(e){var t=i[0][e];o[e]=t||0===t?t:""})}else o[r]=t[r];try{o.options=JSON.parse(t.options||"{}")}catch(s){o.options.other=t.options}return o.options=JSON.stringify(o.options),"xpath"===t.event_type&&(o.dom_md5=C),o.log_extra=b||B.getFromSessionStorage("umeng_log_extra")||"{}",o.tt_bridge=1e3+100*O+10*L+J,o.tt_env=1e3+100*O+10*j+k,n},_sendUmengEvent:function(e,t,n){var o="android"===B.getOS(),r="";r=B.isJoke()||o||B.isLive()?"log_event":"custom_event";var i="bytedance://"+r+"?category=umeng&tag="+e+"&label="+t;if(n)for(var a in n){var s=n[a];if("extra"===a&&"object"==typeof s)if(o)i+="&extra="+encodeURIComponent(JSON.stringify(s));else{var u=s,c="";for(var d in u)c+="object"==typeof u[d]?"&"+d+"="+encodeURIComponent(JSON.stringify(u[d])):"&"+d+"="+encodeURIComponent(u[d]);i+=c}else i+="&"+a+"="+encodeURIComponent(s)}try{window.webkit.messageHandlers.observe.postMessage(i)}catch(f){console.log(i)}}},X={getChildrenIndex:function(e){if(e.sourceIndex)return e.sourceIndex-e.parentNode.sourceIndex-1;for(var t=0;e=e.previousElementSibling;)t++;return t},getXPath:function(e){for(var t="";e.length;){var n=Array.prototype.pop.apply(e);if(n&&n.tagName&&"body"!=n.tagName.toLowerCase()&&"html"!=n.tagName.toLowerCase()){var o="function"==typeof n.getAttribute?n.getAttribute("id"):"";t+=n.tagName.toLowerCase()+this.getChildrenIndex(n)+(o?"#"+o:"")+(0==e.length?"":">")}}return t},getElementByAttr:function(e,t){if("string"==typeof e&&(e=document.getElementById(e)),e||(e=document),e.querySelectorAll){var n=e.querySelectorAll("["+t+"]");return n=Array.prototype.slice.call(n)}for(var o=e.getElementsByTagName("*"),r=o.length,i=0,a=[];r>i;i++){var s=o[i];s.getAttribute(t)&&a.push(s)}return a},getPerformanceObj:function(){if(!window.performance)return"";var e=performance.timing;return e},getDomCount:function(){return document.getElementsByTagName("*").length},getElementParentsAndSelf:function(e){var t=this.getElementParents(e);return t.unshift(e),t},getElementParents:function(e){for(var t=[];e;)e=e.parentNode,e&&t.push(e);return t},delegate:function(e,t,n,o){function r(t){var r=/^\[(.*)\]$/,a=window.event?window.event:t,s=a.target||a.srcElement;if(r.test(n))for(var u=n.match(r)[1],c=X.getElementByAttr(e,u),d=s;d;){if(i.inElement(d,c)){o.call(s,a);break}d=d.parentNode}}if("string"==typeof e&&(e=document.getElementById(e)),e||(e=document),n&&"function"==typeof o){var i=this;e[t]=r}},inElement:function(e,t){for(var n=t.length,o=0;n>o;o++)if(e==t[o])return!0;return!1}};!function(e){"use strict";function t(e,t){var n=(65535&e)+(65535&t),o=(e>>16)+(t>>16)+(n>>16);return o<<16|65535&n}function n(e,t){return e<<t|e>>>32-t}function o(e,o,r,i,a,s){return t(n(t(t(o,e),t(i,s)),a),r)}function r(e,t,n,r,i,a,s){return o(t&n|~t&r,e,t,i,a,s)}function i(e,t,n,r,i,a,s){return o(t&r|n&~r,e,t,i,a,s)}function a(e,t,n,r,i,a,s){return o(t^n^r,e,t,i,a,s)}function s(e,t,n,r,i,a,s){return o(n^(t|~r),e,t,i,a,s)}function u(e,n){e[n>>5]|=128<<n%32,e[(n+64>>>9<<4)+14]=n;var o,u,c,d,f,g=1732584193,l=-271733879,v=-1732584194,_=271733878;for(o=0;o<e.length;o+=16)u=g,c=l,d=v,f=_,g=r(g,l,v,_,e[o],7,-680876936),_=r(_,g,l,v,e[o+1],12,-389564586),v=r(v,_,g,l,e[o+2],17,606105819),l=r(l,v,_,g,e[o+3],22,-1044525330),g=r(g,l,v,_,e[o+4],7,-176418897),_=r(_,g,l,v,e[o+5],12,1200080426),v=r(v,_,g,l,e[o+6],17,-1473231341),l=r(l,v,_,g,e[o+7],22,-45705983),g=r(g,l,v,_,e[o+8],7,1770035416),_=r(_,g,l,v,e[o+9],12,-1958414417),v=r(v,_,g,l,e[o+10],17,-42063),l=r(l,v,_,g,e[o+11],22,-1990404162),g=r(g,l,v,_,e[o+12],7,1804603682),_=r(_,g,l,v,e[o+13],12,-40341101),v=r(v,_,g,l,e[o+14],17,-1502002290),l=r(l,v,_,g,e[o+15],22,1236535329),g=i(g,l,v,_,e[o+1],5,-165796510),_=i(_,g,l,v,e[o+6],9,-1069501632),v=i(v,_,g,l,e[o+11],14,643717713),l=i(l,v,_,g,e[o],20,-373897302),g=i(g,l,v,_,e[o+5],5,-701558691),_=i(_,g,l,v,e[o+10],9,38016083),v=i(v,_,g,l,e[o+15],14,-660478335),l=i(l,v,_,g,e[o+4],20,-405537848),g=i(g,l,v,_,e[o+9],5,568446438),_=i(_,g,l,v,e[o+14],9,-1019803690),v=i(v,_,g,l,e[o+3],14,-187363961),l=i(l,v,_,g,e[o+8],20,1163531501),g=i(g,l,v,_,e[o+13],5,-1444681467),_=i(_,g,l,v,e[o+2],9,-51403784),v=i(v,_,g,l,e[o+7],14,1735328473),l=i(l,v,_,g,e[o+12],20,-1926607734),g=a(g,l,v,_,e[o+5],4,-378558),_=a(_,g,l,v,e[o+8],11,-2022574463),v=a(v,_,g,l,e[o+11],16,1839030562),l=a(l,v,_,g,e[o+14],23,-35309556),g=a(g,l,v,_,e[o+1],4,-1530992060),_=a(_,g,l,v,e[o+4],11,1272893353),v=a(v,_,g,l,e[o+7],16,-155497632),l=a(l,v,_,g,e[o+10],23,-1094730640),g=a(g,l,v,_,e[o+13],4,681279174),_=a(_,g,l,v,e[o],11,-358537222),v=a(v,_,g,l,e[o+3],16,-722521979),l=a(l,v,_,g,e[o+6],23,76029189),g=a(g,l,v,_,e[o+9],4,-640364487),_=a(_,g,l,v,e[o+12],11,-421815835),v=a(v,_,g,l,e[o+15],16,530742520),l=a(l,v,_,g,e[o+2],23,-995338651),g=s(g,l,v,_,e[o],6,-198630844),_=s(_,g,l,v,e[o+7],10,1126891415),v=s(v,_,g,l,e[o+14],15,-1416354905),l=s(l,v,_,g,e[o+5],21,-57434055),g=s(g,l,v,_,e[o+12],6,1700485571),_=s(_,g,l,v,e[o+3],10,-1894986606),v=s(v,_,g,l,e[o+10],15,-1051523),l=s(l,v,_,g,e[o+1],21,-2054922799),g=s(g,l,v,_,e[o+8],6,1873313359),_=s(_,g,l,v,e[o+15],10,-30611744),v=s(v,_,g,l,e[o+6],15,-1560198380),l=s(l,v,_,g,e[o+13],21,1309151649),g=s(g,l,v,_,e[o+4],6,-145523070),_=s(_,g,l,v,e[o+11],10,-1120210379),v=s(v,_,g,l,e[o+2],15,718787259),l=s(l,v,_,g,e[o+9],21,-343485551),g=t(g,u),l=t(l,c),v=t(v,d),_=t(_,f);return[g,l,v,_]}function c(e){var t,n="",o=32*e.length;for(t=0;o>t;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function d(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var o=8*e.length;for(t=0;o>t;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function f(e){return c(u(d(e),8*e.length))}function g(e,t){var n,o,r=d(e),i=[],a=[];for(i[15]=a[15]=void 0,r.length>16&&(r=u(r,8*e.length)),n=0;16>n;n+=1)i[n]=909522486^r[n],a[n]=1549556828^r[n];return o=u(i.concat(d(t)),512+8*t.length),c(u(a.concat(o),640))}function l(e){var t,n,o="0123456789abcdef",r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+=o.charAt(t>>>4&15)+o.charAt(15&t);return r}function v(e){return unescape(encodeURIComponent(e))}function _(e){return f(v(e))}function p(e){return l(_(e))}function m(e,t){return g(v(e),v(t))}function h(e,t){return l(m(e,t))}function S(e,t,n){return t?n?m(t,e):h(t,e):n?_(e):p(e)}e.md5=S}(this);var Q={getPrefix:function(e){var t="";try{t=e.split("_")[0]}catch(n){}return t},traversal:function(e,t,n,o,r){if(e&&1===e.nodeType&&!(n>=o)){var i="",a=this.getPrefix(t);r(t);for(var s,u=0,c=e.childNodes,d=0;u<c.length;u++)s=c[u],s&&1===s.nodeType&&(i=a+","+d+"_"+s.tagName,this.traversal(s,i,n+1,o,r),++d)}}};VENDOR_PREFIXES=["","webkit","Moz","MS","ms","o"];var V,W=window,H=void 0!==o(W,"PointerEvent"),G="ontouchstart"in W;!function(e){e[e.Default=0]="Default",e[e.Start=1]="Start",e[e.Move=2]="Move",e[e.End=4]="End",e[e.Cancle=8]="Cancle"}(V||(V={}));var Y={pointer:{events:["pointerdown","pointermove","pointerup","pointercancel"],handler:function(e){var t=e.type,n={status:V.Default,timestamp:Date.now(),position:[e.clientX,e.clientY]};return t!==this.events[0]||0!==e.button&&"touch"!==e.pointerType?t===this.events[1]?n.status=V.Move:t===this.events[2]?n.status=V.End:t===this.events[3]&&(n.status=V.Cancle):n.status=V.Start,n}},touch:{events:["touchstart","touchmove","touchend","touchcancel"],handler:function(e){var t=e.type;if(1!==e.changedTouches.length)return null;var n={status:V.Default,timestamp:Date.now(),position:[e.changedTouches[0].clientX,e.changedTouches[0].clientY]};return t===this.events[0]?n.status=V.Start:t===this.events[1]?n.status=V.Move:t===this.events[2]?n.status=V.End:t===this.events[3]&&(n.status=V.Cancle),n.status===V.Default?null:n}},mouse:{events:["mousedown","mousemove","mouseup"],handler:function(e){var t=e.type,n={status:V.Default,timestamp:Date.now(),position:[e.clientX,e.clientY]};return t===this.events[0]&&0===e.button?n.status=V.Start:t===this.events[1]?n.status=V.Move:t===this.events[2]&&(n.status=V.End),n.status&V.Move&&1!==e.which&&(n.status=V.End),n.status===V.Default?null:n}}};"MSPointerEvent"in W&&!("PointerEvent"in W)&&(Y.pointer.events=["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel"]);var z={interval:300,time:250,threshold:9,posThreshold:10},$={};$.addClickEvent=function(e,t){var o=function(t){var n,o,r,i;return function(a){var s=Y[t].handler(a);if(null!==s){if(s.status&V.Start)return n=V.Start,o=s.timestamp,r=s.position,void(i=a.target);if(s.status&V.End)n&V.Start&&s.timestamp-o<z.time&&Math.sqrt(Math.pow(s.position[0]-r[0],2)+Math.pow(s.position[1]-r[1],2))<z.threshold&&e(a);else if(s.status&V.Move&&n&V.Start)return}n=0,o=0,r=[0,0],i=null}};H?n(Y.pointer.events,o("pointer"),t):G?n(Y.touch.events,o("touch"),t):n(Y.mouse.events,o("mouse"),t)},r.prototype.then=function(e,t){return e=l(e)?e:void 0,t=l(t)?t:void 0,(e||t)&&(this._isChainEnd=!1),this._state(this._value,e,t)},r.prototype.catch=function(e){return this.then(void 0,e)},r.resolve=function(e){var t=this;return v(e)&&e instanceof this?e:new t(function(t){t(e)})},r.reject=function(e){return new this(function(t,n){n(e)})},r.all=function(e){var t=this;return new t(function(n,o){var r=e.length,i=new Array(r);return 0===r?n(i):void _(e,function(e,a){t.resolve(e).then(function(e){i[a]=e,0==--r&&n(i)},o)})})},r.race=function(e){var t=this;return new t(function(n,o){for(var r=0;r<e.length;r++)t.resolve(e[r]).then(n,o)})};var K=function(e){throw e};r._overrideUnhandledExceptionHandler=function(e){K=e};var Z=function(){function e(){for(var e=0;o>e;e++){var t=n[e];n[e]=null,t()}o=0}var t;"undefined"!=typeof window&&window.postMessage?(window.addEventListener("message",e),t=function(){window.postMessage("macro-task","*")}):t=function(){setTimeout(e,0)};var n=new Array(16),o=0;return function(e){0===o&&t(),n[o++]=e}}();q=S?B.getSiteId():"",e._taq={push:function(e){var t={};return e.event_type?(e.convert_id&&(R=e.convert_id),t=this._assembleData(e),void this._send_log(t)):void console.log("event_type is null")},get_query:function(e){var t={};return e.event_type?t=this._assembleData(e):void console.log("event_type is null")},getCommonData:function(){return{req_id:T,ad_id:D,cid:M,device_id:U,user_id:x}},getFromTTBridge:function(e,t){"adInfo"==e?O=w.FAIL:"appInfo"==e&&(L=w.FAIL),"function"==typeof ToutiaoJSBridge.call&&ToutiaoJSBridge.call(e,{},function(n){"adInfo"==e?O=w.SUCCESS:"appInfo"==e&&(L=w.SUCCESS),t(n)})},_send_log:function(e){if(B.isToutiao()){var t=B._parseUmengData(e);return void B._sendUmengEvent("embeded_ad","convert",t)}var n="//isub.snssdk.com/2/wap/landing_tetris_log/";e.source="webunion",e.sdk_version=h,n+="?"+B.jsonToQuery(e);try{B.syncGet({url:n})}catch(o){}},_assembleData:function(t){var n={},o={},r={},i="",a=this;for(var s in t)if("target"==s){var u=a._getPosition(t[s]);B.extend(n,u)}else n[s]=t[s];try{o=JSON.parse(t.options||"{}")}catch(c){console.log("options 必须为JSON格式字符串"),o.other=t.options}return"performance"===t.event_type&&(o.performance=X.getPerformanceObj()),"xpath"===t.event_type&&(o.dom_md5=C),n.options=o,n.log_extra=b||B.getFromSessionStorage("umeng_log_extra")||"{}",n.os=B.getOS(),n.page_url=decodeURIComponent(e.location.href),n.page_type=n.page_type||S,B.extend(r,a._getDeviceInfo()),B.extend(r,a._getPageInfo()),i=window.encodeURIComponent(JSON.stringify([n])),B.extend(r,{track_data:i}),k=B.isExternal()?w.FAIL:w.SUCCESS,r.tt_bridge=1e3+100*O+10*L+J,r.tt_env=1e3+100*O+10*j+k,r.app_id=N,r},_getPageInfo:function(){var e={};return e.req_id=T||B.getReqId()||B.getFromSessionStorage("umeng_req_id")||"",e.cid=M||B.getCid()||B.getFromSessionStorage("umeng_cid")||"",e.site_id=q,e.ad_id=B.getAdId(),e},_getDeviceInfo:function(){var e={};return e.device_id=U||B.getFromSessionStorage("umeng_device_id")||"",e.user_id=x,e.uid=A||B.getFromSessionStorage("umeng_uid")||"",e.ut=F||B.getFromSessionStorage("umeng_ut")||"",e.client_version=P,e},_getPosition:function(n){if(n){var o=e.innerWidth||t.body.clientWidth,r=n.offsetLeft,i=n.offsetHeight,a=320,s=X.getElementParentsAndSelf(n),u={ox:r,oy:i,tx:~~(r*a/o),ty:~~(i*a/o),xpath:X.getXPath(s)};return u}}};var et={initFlags:function(){O=w.FAIL,L=w.FAIL},initMd5:function(){Q.traversal(t.body,"0_body",0,I,function(e){E+=e}),C=md5(E)},bindEvent:function(){var e=this;$.addClickEvent(function(n){for(var o=n.target,r=o;o!=t;)"function"==typeof o.hasAttribute&&o.hasAttribute("tt-data-click")&&e._sendTargetMsg(o),o=o.parentNode;if(o==t&&!y){var i={};i.target=r,i.event_type="xpath",i.page_url=decodeURIComponent(location.href),i.page_type=S,i.convert_id=R,_taq.push(i)}},!0)},getInfoFromUrl:function(){var e=B.getWebUrlInfo();return e?(j=w.SUCCESS,D=B.getAdId()||"",T=e.req_id||"",R=e.convert_id||"",M=e.cid||"",A=e.uid||"",F=e.ut||"",U=e.device_id||"",b=e.log_extra||"",B.setToSessionStorage("umeng_ad_id",D),B.setToSessionStorage("umeng_req_id",T),B.setToSessionStorage("umeng_cid",M),B.setToSessionStorage("umeng_uid",A),B.setToSessionStorage("umeng_ut",F),B.setToSessionStorage("umeng_device_id",U),B.setToSessionStorage("umeng_log_extra",b),{ad_id:D,req_id:T,cid:M,user_id:A,device_id:U,log_extra:b}):!1},initFromSessionStorage:function(){var e=B.getDefer(),t=B.getDefer();return"ad"===B.getFromSessionStorage("_tt_ad_info_success")?(T=T||B.getFromSessionStorage("_tt_req_id"),M=M||B.getFromSessionStorage("_tt_cid"),R=R||B.getFromSessionStorage("_tt_convert_id"),b=b||B.getFromSessionStorage("_tt_log_extra"),O=w.UNUSE,J=w.SUCCESS,e.resolve({req_id:T,cid:M,convert_id:R,log_extra:b})):_taq.getFromTTBridge("adInfo",function(t){var n;t=t||{},"string"==typeof t&&(t=JSON.parse(t)),M=t.cid||t.ad_id||"",n=JSON.parse(t.log_extra||"{}"),T=n.req_id||"",R=n.convert_id||"",b=t.log_extra||"{}",B.setToSessionStorage("_tt_ad_info_success","ad"),B.setToSessionStorage("_tt_cid",M),B.setToSessionStorage("_tt_req_id",T),B.setToSessionStorage("_tt_convert_id",R),B.setToSessionStorage("_tt_log_extra",b),e.resolve({req_id:T,cid:M,convert_id:R,log_extra:b})}),"app"===B.getFromSessionStorage("_tt_app_info_success")?(U=U||B.getFromSessionStorage("_tt_device_id"),x=x||B.getFromSessionStorage("_tt_user_id"),P=P||B.getFromSessionStorage("_tt_app_version"),N=N||B.getFromSessionStorage("_tt_app_id"),L=w.UNUSE,t.resolve({device_id:U,user_id:x,app_version:P,app_id:N})):_taq.getFromTTBridge("appInfo",function(e){e=e||{},U=e.device_id||"",x=e.user_id||"",P=e.appVersion||"",N=e.aid||"",B.setToSessionStorage("_tt_app_info_success","app"),B.setToSessionStorage("_tt_device_id",U),B.setToSessionStorage("_tt_user_id",x),B.setToSessionStorage("_tt_app_version",P),B.setToSessionStorage("_tt_app_id",N),t.resolve({device_id:U,user_id:x,app_version:P,app_id:N})}),{adInfo:e.promise,appInfo:t.promise}},_sendTargetMsg:function(t){var n={};n.page_url=decodeURIComponent(e.location.href),n.page_type=S,n.event_type=t.getAttribute("tt-data-eventtype")||"",n.convert_id=t.getAttribute("tt-data-convertid")||"",n.event_value=t.getAttribute("tt-data-eventvalue")||"",n.target=t,n.options=t.getAttribute("tt-data-options")||"",_taq.push(n)}};e._taq.getCommonDataPromise=function(){var e=this._getPageInfo(),t=et.getInfoFromUrl();if(t)return B.combineData(e,t);if(B.isToutiao()){var n=et.initFromSessionStorage();return B.combineData(e,n)}return B.combineData(e,{req_id:T,cid:M,user_id:A,device_id:U,log_extra:b})},et.initMd5(),!et.getInfoFromUrl()&&B.isToutiao()&&et.initFromSessionStorage(),et.bindEvent()}function o(e,t){var n=document.createElement("script");n.src=e,t=t||function(){},n.onload=n.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(t(),this.onload=this.onreadystatechange=null,this.parentNode.removeChild(this))},document.getElementsByTagName("head")[0].appendChild(n)}e._taq||(e._taq=[],o("//s3.pstatp.com/inapp/toutiao.js",function(){n()}))}(window,document);